Parameters:
  name: Pythia8CharmSimulation
  build: mdc2.7
  comment: Generate Pythia8 Charm Events and run through F4A
  nJobs:   1   # create 10 jobs
  nEvents: 1   # 100 events per job
  macro: Fun4All_G4_HF_pp_signal.C
  flavor: Charm  
  runnumber: 1
  maxAttempt: 3

Resources:
  - file: ../MDC2/submit/HF_pp200_signal/pass1/rundir/*


OutputDataSets:
  - name: Pythia8CharmSimulation/outDS
    comment: Pythia8 events
    filelist:
       - "required:Pythia8CharmSimulation.outDS.tar"


JobCommands: |-
  echo START ${name} `date` > /sphenix/u/sphnxpro/shrek/${name}-${uniqueId}.log1

  # Initialize sPHENIX software environment
  source /opt/sphenix/core/bin/sphenix_setup.sh -n ${build}

  rn=$( printf "%010d" $runnumber )
  sn=$( printf "%05d"  $uniqueId )

  filename=G4Hits-${flavor}-${rn}-${sn}.root
  root.exe -q -b ${macro}\($nEvents,\"${flavor}\",\"${filename}\",\"\",0,\".\"\) >> /sphenix/u/sphnxpro/shrek/${name}-${uniqueId}.log1
  ls -la ${filename} >> /sphenix/u/sphnxpro/shrek/${name}-${uniqueId}.log1

  # Add output to the tar file
  tar cvf Pythia8CharmSimulation.outDS.tar ${filename}
  tar xvf Pythia8CharmSimulation.outDS.tar  >> /sphenix/u/sphnxpro/shrek/${name}-${uniqueId}.log1

  #touch ${filename}
  #tar cvf Pythia8CharmSimulation.outDS.tar ${filename}

  ls -la ${filename} >> /sphenix/u/sphnxpro/shrek/${name}-${uniqueId}.log1

  echo END   ${name} `date` 
  echo END   ${name} `date` >> /sphenix/u/sphnxpro/shrek/${name}-${uniqueId}.log1
  cp _${name}.log /sphenix/u/sphnxpro/shrek/${name}-${uniqueId}.log

